<!DOCTYPE html>
<html lang="en-gb">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Building an HS Code Classification Model | Shan Sun</title>
  <meta name="description" content="Reflections on tax, tax technology and more.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:url" content="https://shan.tax/posts/buildinganhscodeclassification/">
  <meta property="og:site_name" content="Shan Sun">
  <meta property="og:title" content="Building an HS Code Classification Model">
  <meta property="og:description" content="I. What are HS codes? International trade relies on Harmonized System (“HS”) codes to classify goods transported across borders. Incorrect HS code classification may result in penalties and seizure of goods.
HS codes are used by all countries globally to classify imported and exported goods down to 6-digits. The HS code is split into three two-digit groups:
First two digits - categorize product (e.g. “61” for Apparel &amp; Clothing) Second two digits - classify further (e.">
  <meta property="og:locale" content="en_gb">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-03-25T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-03-25T00:00:00+00:00">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Building an HS Code Classification Model">
  <meta name="twitter:description" content="I. What are HS codes? International trade relies on Harmonized System (“HS”) codes to classify goods transported across borders. Incorrect HS code classification may result in penalties and seizure of goods.
HS codes are used by all countries globally to classify imported and exported goods down to 6-digits. The HS code is split into three two-digit groups:
First two digits - categorize product (e.g. “61” for Apparel &amp; Clothing) Second two digits - classify further (e.">

  
  
    
  
  
  <link rel="stylesheet" href="https://shan.tax/css/style-white.css">
  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://shan.tax/images/favicon.ico" />

  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/about/">About</a></li>
         
        <li><a href="/quests/">Quests</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://shan.tax/posts/building-a-personal-website-for-free/">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://shan.tax/posts/buildingawithholdingtaxdeterminationengine/">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&text=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&title=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&is_video=false&description=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Building%20an%20HS%20Code%20Classification%20Model&body=Check out this article: https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&title=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&title=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&title=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-stumbleupon " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&title=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-digg " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&name=Building%20an%20HS%20Code%20Classification%20Model&description=I.%20What%20are%20HS%20codes%3f%20International%20trade%20relies%20on%20Harmonized%20System%20%28%e2%80%9cHS%e2%80%9d%29%20codes%20to%20classify%20goods%20transported%20across%20borders.%20Incorrect%20HS%20code%20classification%20may%20result%20in%20penalties%20and%20seizure%20of%20goods.%0aHS%20codes%20are%20used%20by%20all%20countries%20globally%20to%20classify%20imported%20and%20exported%20goods%20down%20to%206-digits.%20The%20HS%20code%20is%20split%20into%20three%20two-digit%20groups%3a%0aFirst%20two%20digits%20-%20categorize%20product%20%28e.g.%20%e2%80%9c61%e2%80%9d%20for%20Apparel%20%26amp%3b%20Clothing%29%20Second%20two%20digits%20-%20classify%20further%20%28e.">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&t=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#i-what-are-hs-codes"><strong>I. What are HS codes?</strong></a></li>
        <li><a href="#ii-challenges-with-hs-code-classification"><strong>II. Challenges with HS code classification</strong></a></li>
        <li><a href="#iii-building-an-hs-code-classification-model"><strong>III. Building an HS code classification model</strong></a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Building an HS Code Classification Model
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2021-03-25 00:00:00 &#43;0000 UTC" itemprop="datePublished">2021-03</time>
          
        </div>
        
        
      </div>
    </header>

  
    <div class="content" itemprop="articleBody">
      <h3 id="i-what-are-hs-codes"><strong>I. What are HS codes?</strong></h3>
<p>International trade relies on <a href="https://en.wikipedia.org/wiki/Harmonized_System">Harmonized System</a> (“HS”) codes to classify goods transported across borders. Incorrect HS code classification may result in penalties and seizure of goods.</p>
<p>HS codes are used by all countries globally to classify imported and exported goods down to 6-digits. The HS code is split into three two-digit groups:</p>
<ul>
<li>First two digits - categorize product (e.g. “61” for Apparel &amp; Clothing)</li>
<li>Second two digits - classify further (e.g. “6109” for t-shirts)</li>
<li>Third two digits - specify details of the product (e.g. “610910” for cotton t-shirts)</li>
</ul>
<p>An additional 2 to 6 digits are added by individual countries to describe the goods in even more detail. For example, the US assigns a 10-digit code, of which the last 4 is known as the <a href="https://www.trade.gov/harmonized-system-hs-codes">Schedule B number</a>.</p>
<p>Tariffs and customs duties are imposed on imported and exported goods based on their HS code classification. The HS code classification is also used to recognise any preferential trade agreement.</p>
<p>The Harmonized System is organized into 21 sections, with 96 chapters in each section, and each chapter is divided into around 5,000 headings and subheadings. The system is enormous. Many factors affect the classification of HS codes, including but not limited to product composition, form, and use.</p>
<h3 id="ii-challenges-with-hs-code-classification"><strong>II. Challenges with HS code classification</strong></h3>
<p>Given the variety and volume of goods in international trade, assigning the correct HS code often presents challenges. Some major challenges encountered when working on this project include:</p>
<ul>
<li><strong>Fragmented data source</strong> - like many other taxes, the data source for HS codes is not neatly presented, especially in a large multinational organisation. Often there are multiple teams holding one or several pieces of information.</li>
<li><strong>Inaccurate data</strong> - to this day, many countries still rely on human experience to assign the correct HS code to goods for their respective country and purposes, often resulting in the wrong classification.</li>
<li><strong>Missing out on preferential rates under trade agreements</strong> - each country has individually negotiated rates on certain types of goods, but this may not always be considered when it comes to assigning HS codes. In addition, trade agreements also change over time, and outdated information or ineffective communication from government authorities can also result in incorrect classification.</li>
</ul>
<h3 id="iii-building-an-hs-code-classification-model"><strong>III. Building an HS code classification model</strong></h3>
<p>Given the significance of HS codes in international trade and the various challenges in classifying them correctly, I set out to create an automated classification model which uses algorithms to assist the customs teams in selecting HS codes.</p>
<p>I aimed to solve the problem on a country-by-country basis, given each country has its own rules on how many digits go into the HS code and a different set of trade agreements.</p>
<p>I determine the classification almost solely relying on invoice descriptions. In the spirit of lean working, I started with a prototype for the Philippines only.</p>
<p>Key parameters of the project are listed below:</p>
<p><strong>Data</strong></p>
<p>Only 3000 rows of data are available including invoice description and corresponding HS code (target “labels” for the algorithm). The invoice descriptions are in English.</p>
<p><strong>Models</strong></p>
<p>Given the limited size of data, I used a combination of machine learning and fuzzy string matching, with a refined weighting between these two methods;</p>
<p>I used natural language processing techniques for extracting model features from the invoice descriptions, and a <a href="http://epistasislab.github.io/tpot/" title="genetic algorithm">genetic algorithm</a> to automatically fine-tune and select the best machine learning model;</p>
<p><strong>Results</strong></p>
<p>For a given input, the model returns the top three most likely HS codes, along with several examples for each HS code, for users to review. The combined model achieved an accuracy of 92%.</p>
<p><strong>User interface</strong></p>
<p>The classification model was productionised via a Django-powered web application. The frontend interface allows users to input their own invoice description, whereupon the model then returns the top three most likely HS codes.</p>
<p><img src="/uploads/screenshot-2021-09-15-at-22-34-57.png" alt=""></p>

    </div>
  </article>

  
  





  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/quests/">Quests</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#i-what-are-hs-codes"><strong>I. What are HS codes?</strong></a></li>
        <li><a href="#ii-challenges-with-hs-code-classification"><strong>II. Challenges with HS code classification</strong></a></li>
        <li><a href="#iii-building-an-hs-code-classification-model"><strong>III. Building an HS code classification model</strong></a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&text=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&title=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&is_video=false&description=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Building%20an%20HS%20Code%20Classification%20Model&body=Check out this article: https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&title=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&title=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&title=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&title=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-digg fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&name=Building%20an%20HS%20Code%20Classification%20Model&description=I.%20What%20are%20HS%20codes%3f%20International%20trade%20relies%20on%20Harmonized%20System%20%28%e2%80%9cHS%e2%80%9d%29%20codes%20to%20classify%20goods%20transported%20across%20borders.%20Incorrect%20HS%20code%20classification%20may%20result%20in%20penalties%20and%20seizure%20of%20goods.%0aHS%20codes%20are%20used%20by%20all%20countries%20globally%20to%20classify%20imported%20and%20exported%20goods%20down%20to%206-digits.%20The%20HS%20code%20is%20split%20into%20three%20two-digit%20groups%3a%0aFirst%20two%20digits%20-%20categorize%20product%20%28e.g.%20%e2%80%9c61%e2%80%9d%20for%20Apparel%20%26amp%3b%20Clothing%29%20Second%20two%20digits%20-%20classify%20further%20%28e.">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fshan.tax%2fposts%2fbuildinganhscodeclassification%2f&t=Building%20an%20HS%20Code%20Classification%20Model">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2024  Shan Sun 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/about/">About</a></li>
         
        <li><a href="/quests/">Quests</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>



</html>
