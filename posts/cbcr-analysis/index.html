<!DOCTYPE html>
<html lang="en-gb">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> CBCR Analysis | Shan Sun</title>
  <meta name="description" content="Reflections on tax, tax technology and more.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:url" content="https://shan.tax/posts/cbcr-analysis/">
  <meta property="og:site_name" content="Shan Sun">
  <meta property="og:title" content="CBCR Analysis">
  <meta property="og:description" content="Background OECD‚Äôs BEPS project Action 13 provides a template for multinational enterprises (‚ÄúMNEs‚Äù) to report annually and for each tax jurisdiction in which they do business the information set out therein. This report is called the Country-by-Country Report (‚ÄúCBCR‚Äù). The CBCR template requires two tables of MNEs‚Äô financial and operational information.
Exploratory data analysis In the first year of submitting CBCR, I wanted to use Python instead of Excel to see how one may get more insights from the data collected in CBCR. There are obvious measures to be constructed, such as productivity per employee using PBT over the number of employees or related vs. unrelated revenue generated by capital. In Python, it feels much lighter and cleaner. For example, to construct and plot the operating margin in ascending order was just one line of code:">
  <meta property="og:locale" content="en_gb">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2017-12-12T23:00:00+00:00">
    <meta property="article:modified_time" content="2017-12-12T23:00:00+00:00">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="CBCR Analysis">
  <meta name="twitter:description" content="Background OECD‚Äôs BEPS project Action 13 provides a template for multinational enterprises (‚ÄúMNEs‚Äù) to report annually and for each tax jurisdiction in which they do business the information set out therein. This report is called the Country-by-Country Report (‚ÄúCBCR‚Äù). The CBCR template requires two tables of MNEs‚Äô financial and operational information.
Exploratory data analysis In the first year of submitting CBCR, I wanted to use Python instead of Excel to see how one may get more insights from the data collected in CBCR. There are obvious measures to be constructed, such as productivity per employee using PBT over the number of employees or related vs. unrelated revenue generated by capital. In Python, it feels much lighter and cleaner. For example, to construct and plot the operating margin in ascending order was just one line of code:">

  
  
    
  
  
  <link rel="stylesheet" href="https://shan.tax/css/style-white.css">
  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://shan.tax/images/favicon.ico" />

  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/about/">About</a></li>
         
        <li><a href="/quests/">Quests</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li>
          <a class="icon" href="https://shan.tax/posts/skills-for-future-tax-professionals/">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&text=CBCR%20Analysis">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&title=CBCR%20Analysis">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&is_video=false&description=CBCR%20Analysis">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=CBCR%20Analysis&body=Check out this article: https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&title=CBCR%20Analysis">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&title=CBCR%20Analysis">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&title=CBCR%20Analysis">
      <i class="fab fa-stumbleupon " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&title=CBCR%20Analysis">
      <i class="fab fa-digg " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&name=CBCR%20Analysis&description=%3ch2%20id%3d%22background%22%3eBackground%3c%2fh2%3e%0a%3cp%3eOECD%e2%80%99s%20BEPS%20project%20Action%2013%20provides%20a%20template%20for%20multinational%20enterprises%20%28%e2%80%9cMNEs%e2%80%9d%29%20to%20report%20annually%20and%20for%20each%20tax%20jurisdiction%20in%20which%20they%20do%20business%20the%20information%20set%20out%20therein.%20This%20report%20is%20called%20the%20Country-by-Country%20Report%20%28%e2%80%9cCBCR%e2%80%9d%29.%20The%20CBCR%20template%20requires%20two%20tables%20of%20MNEs%26rsquo%3b%20financial%20and%20operational%20information.%3c%2fp%3e%0a%3ch2%20id%3d%22exploratory-data-analysis%22%3eExploratory%20data%20analysis%3c%2fh2%3e%0a%3cp%3eIn%20the%20first%20year%20of%20submitting%20CBCR%2c%20I%20wanted%20to%20use%20Python%20instead%20of%20Excel%20to%20see%20how%20one%20may%20get%20more%20insights%20from%20the%20data%20collected%20in%20CBCR.%20There%20are%20obvious%20measures%20to%20be%20constructed%2c%20such%20as%20productivity%20per%20employee%20using%20PBT%20over%20the%20number%20of%20employees%20or%20related%20vs.%20unrelated%20revenue%20generated%20by%20capital.%20In%20Python%2c%20it%20feels%20much%20lighter%20and%20cleaner.%20For%20example%2c%20to%20construct%20and%20plot%20the%20operating%20margin%20in%20ascending%20order%20was%20just%20one%20line%20of%20code%3a%3c%2fp%3e">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&t=CBCR%20Analysis">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#background">Background</a></li>
    <li><a href="#exploratory-data-analysis">Exploratory data analysis</a></li>
    <li><a href="#a-step-deeper">A step deeper</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        üêæ CBCR Analysis üêæ
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2017-12-12 23:00:00 &#43;0000 UTC" itemprop="datePublished">2017-12</time>
          
        </div>
        
        
      </div>
    </header>

  
    <div class="content" itemprop="articleBody">
      <h2 id="background">Background</h2>
<p>OECD‚Äôs BEPS project Action 13 provides a template for multinational enterprises (‚ÄúMNEs‚Äù) to report annually and for each tax jurisdiction in which they do business the information set out therein. This report is called the Country-by-Country Report (‚ÄúCBCR‚Äù). The CBCR template requires two tables of MNEs&rsquo; financial and operational information.</p>
<h2 id="exploratory-data-analysis">Exploratory data analysis</h2>
<p>In the first year of submitting CBCR, I wanted to use Python instead of Excel to see how one may get more insights from the data collected in CBCR. There are obvious measures to be constructed, such as productivity per employee using PBT over the number of employees or related vs. unrelated revenue generated by capital. In Python, it feels much lighter and cleaner. For example, to construct and plot the operating margin in ascending order was just one line of code:</p>
<p><img src="/uploads/eda.png" alt=""></p>
<p>Another example is using the heatmap function in Python to have a high-level visual understanding of the relationships between each data attribute within the CBCR.</p>
<p><img src="/uploads/heatmap.png" alt=""></p>
<p>Each square shows the correlation between the data attributes on each axis. Correlation ranges from -1 to +1. Values closer to zero mean there is no linear trend between the two attributes. The closer to 1/-1 the correlation is, the more positively/negatively correlated the variables are. The diagonals are all 1/dark purple because those squares are correlating each data attribute to itself (so it‚Äôs a perfect correlation). For the rest, the larger the number and darker the colour the higher the correlation between the two attributes, e.g., ‚Äòtangible assets‚Äô here is shown to be highly positively correlated to ‚Äòunrelated parties revenue‚Äô (very dark purple).</p>
<h2 id="a-step-deeper">A step deeper</h2>
<p>The exploratory analyses would only provide linear views on each of the data attributes per se. I wonder if there‚Äôs a way to use publicly available data to construct any anomalies across the countries as an indicator of tax risks. Given OECD stated other sources of data could be considered, I brought in an additional data source ‚Äì country headline corporation tax rate, and constructed a new measure called ‚Äòtax elasticity‚Äô to compare country tax payments.</p>
<pre><code>tax elasticity = effective tax rate / country headline corporation tax rate
</code></pre>
<p>Where effective tax rate is calculated by tax paid/profit before tax. Tax elasticity provides an indicator of how much tax was paid effectively, on a scale of 0 to 1. Smaller tax elasticity may indicate there was active tax planning, such as loss carried forward. By overlaying this information with another financial KPI, such as operating margin, we obtain some interesting insights.</p>
<p><img src="/uploads/tax_elasticity.png" alt=""></p>
<p>Here the green line indicates the average operating margin, whilst the red line sets a tax elasticity of 0.9, i.e., the effective tax rate is at 90% of the country headline rate. The plotted graph allows comparison across countries. For countries earning more than the average operating margin, but which have a very low tax elasticity, i.e., the countries in the right bottom corner, we might anticipate questions to be raised by the respective tax authorities given the information in CBCR.</p>
<p>In reality, this analysis initiated many internal queries on tax risks, internal data collection processes, and potential tax planning opportunities.</p>
<h2 id="conclusion">Conclusion</h2>
<p>In the first year of collecting CBCR information, the above analyses do not necessarily require any complex data analytics setup. Excel with VBA could probably achieve the same results. However, going forward, there are inevitable scenarios where Excel would not be a good fit:</p>
<ul>
<li>Increasingly complex computations with increasingly large datasets</li>
<li>Need to integrate with third-party data to augment tax models</li>
<li>Requirement for faster models and robust codebases that adhere to software development best practices, e.g. an automated data pipeline for CI/CD and version control for audit purposes</li>
</ul>
<p>For recurring compliance and analytic requirements such as CBCR, setting up an end-to-end solution from data extraction to deep-dive analysis is both desirable and necessary.</p>

    </div>
  </article>

  
  





  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/quests/">Quests</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#background">Background</a></li>
    <li><a href="#exploratory-data-analysis">Exploratory data analysis</a></li>
    <li><a href="#a-step-deeper">A step deeper</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&text=CBCR%20Analysis">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&title=CBCR%20Analysis">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&is_video=false&description=CBCR%20Analysis">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=CBCR%20Analysis&body=Check out this article: https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&title=CBCR%20Analysis">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&title=CBCR%20Analysis">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&title=CBCR%20Analysis">
      <i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&title=CBCR%20Analysis">
      <i class="fab fa-digg fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&name=CBCR%20Analysis&description=%3ch2%20id%3d%22background%22%3eBackground%3c%2fh2%3e%0a%3cp%3eOECD%e2%80%99s%20BEPS%20project%20Action%2013%20provides%20a%20template%20for%20multinational%20enterprises%20%28%e2%80%9cMNEs%e2%80%9d%29%20to%20report%20annually%20and%20for%20each%20tax%20jurisdiction%20in%20which%20they%20do%20business%20the%20information%20set%20out%20therein.%20This%20report%20is%20called%20the%20Country-by-Country%20Report%20%28%e2%80%9cCBCR%e2%80%9d%29.%20The%20CBCR%20template%20requires%20two%20tables%20of%20MNEs%26rsquo%3b%20financial%20and%20operational%20information.%3c%2fp%3e%0a%3ch2%20id%3d%22exploratory-data-analysis%22%3eExploratory%20data%20analysis%3c%2fh2%3e%0a%3cp%3eIn%20the%20first%20year%20of%20submitting%20CBCR%2c%20I%20wanted%20to%20use%20Python%20instead%20of%20Excel%20to%20see%20how%20one%20may%20get%20more%20insights%20from%20the%20data%20collected%20in%20CBCR.%20There%20are%20obvious%20measures%20to%20be%20constructed%2c%20such%20as%20productivity%20per%20employee%20using%20PBT%20over%20the%20number%20of%20employees%20or%20related%20vs.%20unrelated%20revenue%20generated%20by%20capital.%20In%20Python%2c%20it%20feels%20much%20lighter%20and%20cleaner.%20For%20example%2c%20to%20construct%20and%20plot%20the%20operating%20margin%20in%20ascending%20order%20was%20just%20one%20line%20of%20code%3a%3c%2fp%3e">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fshan.tax%2fposts%2fcbcr-analysis%2f&t=CBCR%20Analysis">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2025  Shan Sun 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/about/">About</a></li>
         
        <li><a href="/quests/">Quests</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>



</html>
